---
const currentPath = Astro.url.pathname;
const menuItems = [
    { name: "dashboard", href: "/", icon: "grid" },
    { name: "bots", href: "/", icon: "cpu" }, // In the future, this might be /bots
    { name: "settings", href: "#", icon: "settings" },
];
---

<aside
    class="fixed left-0 top-0 h-screen w-16 md:w-64 bg-brand-dark/80 backdrop-blur-xl border-r border-white/10 z-50 transition-all duration-300 group"
    x-data="{ open: false }"
>
    <!-- Logo area -->
    <div
        class="h-16 flex items-center px-4 border-b border-white/5 overflow-hidden"
    >
        <div
            class="min-w-[40px] h-10 bg-brand-purple flex items-center justify-center font-bold text-white tracking-tighter"
        >
            S
        </div>
        <span
            class="ml-4 font-bold tracking-widest text-white uppercase hidden md:block"
            >ENTINEL</span
        >
    </div>

    <!-- Navigation -->
    <nav class="mt-6 space-y-2 px-2">
        <template
            x-for="item in [
            { id: 'dashboard', href: '/', icon: 'M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z' },
            { id: 'bots', href: '/bots', icon: 'M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z' }
        ]"
        >
            <a
                :href="item.href"
                class="flex items-center p-3 transition-all duration-200 border border-transparent hover:border-brand-purple/20 relative group"
                :class="(item.href === '/' ? window.location.pathname === '/' : window.location.pathname.startsWith(item.href)) ? 'bg-brand-purple/10 text-brand-purple border-brand-purple/20' : 'text-gray-500 hover:bg-white/5'"
            >
                <div class="min-w-[24px]">
                    <svg
                        class="w-6 h-6"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                    >
                        <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="1.5"
                            :d="item.icon"></path>
                    </svg>
                </div>
                <span
                    class="ml-4 font-mono text-xs uppercase tracking-widest transition-opacity duration-300 hidden md:inline"
                    x-text="$t(item.id)"></span>

                <!-- Active Indicator -->
                <div
                    x-show="item.href === '/' ? window.location.pathname === '/' : window.location.pathname.startsWith(item.href)"
                    class="absolute left-0 top-0 h-full w-1 bg-brand-purple"
                >
                </div>
            </a>
        </template>
    </nav>

    <!-- Footer / Language Toggle (optional move here?) -->
    <div class="absolute bottom-4 left-0 w-full px-2">
        <div
            class="p-3 text-[10px] font-mono text-gray-500 uppercase border border-white/5 bg-white/5 hidden md:block"
        >
            V 1.0.2-BETA
        </div>
    </div>
</aside>
